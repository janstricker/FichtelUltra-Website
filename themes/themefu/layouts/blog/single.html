<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  {{ partial "head.html" . }}
</head>

{{ $class := .Params.color | default "blog" }}
<body class="{{$class}}">
  {{ partial "header.html" . }}
  <div class="container min-h-content hpadding">
    <main class="mainSection">
      {{ with .Resources.GetMatch "*/title.*" }}
        <img class="postHeaderImg" src="{{ .RelPermalink }}" alt="{{ .Title }}"/>
      {{ else with .Resources.GetMatch "*/*.*" }}
        <img class="postHeaderImg" src="{{ .RelPermalink }}" alt="{{ .Title }}"/>
      {{ end }}

    {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
    {{ $dateHuman := .Date | time.Format ":date_long" }}
    <time class="text-small text-muted">
        <span>
            {{ $daysAgo := div (sub (now.Unix | int) (.Date.Unix | int)) 86400 }}
            {{ if lt $daysAgo 30 }}
                <span>
                    vor {{ if eq $daysAgo 1 }}1 Tag{{ else }}{{ $daysAgo }} Tagen{{ end }}
                </span>
            {{ else if lt $daysAgo 90 }}
                {{ $monthsAgo := div $daysAgo 30 }}
                <span>
                    vor {{ if eq $monthsAgo 1 }}1 Monat{{ else }}{{ $monthsAgo }} Monaten{{ end }}
                </span>
            {{ else }}
                <span>
                    {{ .Date | time.Format ":date_long" }}
                </span>
            {{ end }}
        </span>
    </time>

    <h1>{{ .Title }}</h1>
    
    {{ with .Params.tags }}
      <div class="tags">
          {{ range . }}<span class="tag">{{ . }}</span> {{ end }}
      </div>
    {{ end }}

      {{ .Content }}

      {{ if .Resources.GetMatch "album/*" }}
        {{ partial "image-gallery" (dict "context" . "gallery_dir" "/album") }}
      {{ end }}
    </main>
  </div>
  {{ partial "footer.html" . }}
</body>
</html>